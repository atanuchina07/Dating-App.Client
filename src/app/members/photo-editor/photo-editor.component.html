<div class="row">
  @for (photo of member().photos; track photo.id) {
  <div class="col-2">
    <img src="{{ photo.url }}" alt="photo" class="img-thumbnail mb-1" />
    <div class="text-center">
      <button
        (click)="setMainPhoto(photo)"
        [ngClass]="photo.isMain ? 'btn-success-active' : 'btn-outlet-active'"
        class="btn btn-sm me-1"
        [disabled]="photo.isMain"
      >
        Main
      </button>
      <button
        class="btn btn-sm btn-danger"
        (click)="deletePhoto(photo)"
        [disabled]="photo.isMain"
      >
        <i class="fa fa-trash"></i>
      </button>
    </div>
  </div>
  }
</div>
<div class="container py-4">
  <div class="row">
    <!-- Add Photos Section -->
    <div class="col-md-4">
      <h3 class="mb-4 text-primary fw-bold">Add Photos</h3>

      <div
        ng2FileDrop
        [ngClass]="{ 'nv-file-over': hasBaseDropZoneOver }"
        (fileOver)="fileOverBase($event)"
        [uploader]="uploader"
        class="card shadow-sm border-0 bg-light text-center p-4 my-drop-zone"
        style="cursor: pointer; transition: 0.3s"
      >
        <i class="fa fa-upload fa-3x text-secondary mb-2"></i>
        <p class="mb-0 text-muted">Drag and drop photos here</p>
      </div>
    </div>

    <!-- Upload Queue Section -->
    <div class="col-md-8 mt-4 mt-md-0">
      <h3 class="mb-4 text-success fw-bold">Upload Queue</h3>

      <p class="text-muted mb-2">Queue length: {{ uploader?.queue?.length }}</p>

      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Name</th>
              <th>Size</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of uploader?.queue">
              <td>
                <strong>{{ item?.file?.name }}</strong>
              </td>
              <td *ngIf="uploader?.options?.isHTML5">
                {{ item?.file?.size / 1024 / 1024 | number : "1.2-2" }} MB
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="mt-4">
        <label class="form-label fw-semibold">Queue Progress</label>
        <div class="progress mb-3" style="height: 20px">
          <div
            class="progress-bar bg-info progress-bar-striped progress-bar-animated"
            role="progressbar"
            [ngStyle]="{ width: uploader?.progress + '%' }"
            [attr.aria-valuenow]="uploader?.progress"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            {{ uploader?.progress }}%
          </div>
        </div>

        <div class="d-flex gap-2 flex-wrap">
          <button
            type="button"
            class="btn btn-success"
            (click)="uploader?.uploadAll()"
            [disabled]="!uploader?.getNotUploadedItems()?.length"
          >
            <i class="fa fa-upload me-1"></i> Upload All
          </button>
          <button
            type="button"
            class="btn btn-warning"
            (click)="uploader?.cancelAll()"
            [disabled]="!uploader?.isUploading"
          >
            <i class="fa fa-ban me-1"></i> Cancel All
          </button>
          <button
            type="button"
            class="btn btn-danger"
            (click)="uploader?.clearQueue()"
            [disabled]="!uploader?.queue?.length"
          >
            <i class="fa fa-trash me-1"></i> Remove All
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
